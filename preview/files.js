var e,t;e=window,t=function(){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){var o=i(1);"string"==typeof o&&(o=[[e.i,o,""]]);var n={attributes:{"data-injector":"kwe-nav"},injectType:"singletonStyleTag",insert:"head",singleton:!0};i(3)(o,n),o.locals&&(e.exports=o.locals)},function(e,t,i){(e.exports=i(2)(!1)).push([e.i,'body,div,html,input,li,ol,p,textarea,ul{margin:0;padding:0}img{border:0}li{list-style:none outside none}a,a:active,a:hover,a:link,a:link:hover,a:visited{text-decoration:none}.kwe-files-wrap{position:relative}.kwe-files-wrap:before{content:attr(data-text);position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:inline-block;color:#fff;border-radius:2px;pointer-events:none;z-index:99;line-height:2;padding:0 8px;background-color:rgba(0,0,0,.5)}.kwe-files-top{position:relative;top:10px;left:50%;width:200px;height:40px;-webkit-transform:translateX(-50%);transform:translateX(-50%);background-color:#00a1d6;border-radius:8px;border:1px solid #ccc;cursor:pointer;text-align:center;line-height:40px}.kwe-files-top:hover{background-color:#00b5e5}.kwe-files-input{display:none}.kwe-files-list{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:40px 0;position:relative}.kwe-files-list:before{content:"图片内容:";position:absolute;left:0;top:-34px;font-size:25px}.kwe-files-list-img:before{content:"图片内容:"}.kwe-files-list-svg:before{content:"svg内容:"}.kwe-files-list-audio:before{content:"音频内容:"}.kwe-files-list-video:before{content:"视频内容:"}.kwe-files-list-other:before{content:"其他内容:"}.kwe-files-audio,.kwe-files-img,.kwe-files-other,.kwe-files-svg,.kwe-files-video{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:200px;padding:10px;margin:4px;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#ccc}.kwe-files-audio p,.kwe-files-img p,.kwe-files-other p,.kwe-files-svg p,.kwe-files-video p{width:100%;text-align:left;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;pointer-events:none}.kwe-files-audio-top,.kwe-files-img-top,.kwe-files-other-top,.kwe-files-svg-top,.kwe-files-video-top{-webkit-box-flex:1;-ms-flex:auto;flex:auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;margin-bottom:6px}.kwe-files-audio-top>img,.kwe-files-audio-top>video,.kwe-files-img-top>img,.kwe-files-img-top>video,.kwe-files-other-top>img,.kwe-files-other-top>video,.kwe-files-svg-top>img,.kwe-files-svg-top>video,.kwe-files-video-top>img,.kwe-files-video-top>video{width:100%}.kwe-files-audio-top>svg,.kwe-files-img-top>svg,.kwe-files-other-top>svg,.kwe-files-svg-top>svg,.kwe-files-video-top>svg{width:100%;height:100%}.kwe-files-audio,.kwe-files-video{width:400px}.kwe-files-audio-top>audio,.kwe-files-audio-top>video,.kwe-files-video-top>audio,.kwe-files-video-top>video{width:100%}.kwe-files-svg{width:180px}.kwe-files-svg-top{width:40px;height:40px}.kwe-files-file-name{position:relative;width:100%;cursor:pointer}.kwe-files-file-name:hover:after{content:attr(data-name)}.kwe-files-file-name:after{position:absolute;left:50%;bottom:110%;font-size:14px;padding:4px 6px;white-space:nowrap;-webkit-transform:translateX(-50%);transform:translateX(-50%);color:#fff;border-radius:2px;background-color:rgba(0,0,0,.5)}.kwe-files-file-name p{pointer-events:none}',""])},function(e,t,i){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i,o,n,r=e[1]||"",s=e[3];if(!s)return r;if(t&&"function"==typeof btoa){var a=(i=s,o=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),"/*# ".concat(n," */")),l=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot).concat(e," */")}));return[r].concat(l).concat([a]).join("\n")}return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(i,"}"):i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0;n<this.length;n++){var r=this[n][0];null!=r&&(o[r]=!0)}for(var s=0;s<e.length;s++){var a=e[s];null!=a[0]&&o[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="(".concat(a[2],") and (").concat(i,")")),t.push(a))}},t}},function(e,t,i){"use strict";var o,n={},r=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},s=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}();function a(e,t){for(var i=[],o={},n=0;n<e.length;n++){var r=e[n],s=t.base?r[0]+t.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):i.push(o[s]={id:s,parts:[a]})}return i}function l(e,t){for(var i=0;i<e.length;i++){var o=e[i],r=n[o.id],s=0;if(r){for(r.refs++;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(m(o.parts[s],t))}else{for(var a=[];s<o.parts.length;s++)a.push(m(o.parts[s],t));n[o.id]={id:o.id,refs:1,parts:a}}}}function p(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var o=i.nc;o&&(e.attributes.nonce=o)}if(Object.keys(e.attributes).forEach((function(i){t.setAttribute(i,e.attributes[i])})),"function"==typeof e.insert)e.insert(t);else{var n=s(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function d(e,t,i,o){var n=i?"":o.css;if(e.styleSheet)e.styleSheet.cssText=f(t,n);else{var r=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function u(e,t,i){var o=i.css,n=i.media,r=i.sourceMap;if(n&&e.setAttribute("media",n),r&&btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}var v=null,h=0;function m(e,t){var i,o,n;if(t.singleton){var r=h++;i=v||(v=p(t)),o=d.bind(null,i,r,!1),n=d.bind(null,i,r,!0)}else i=p(t),o=u.bind(null,i,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r());var i=a(e,t);return l(i,t),function(e){for(var o=[],r=0;r<i.length;r++){var s=i[r],p=n[s.id];p&&(p.refs--,o.push(p))}e&&l(a(e,t),t);for(var c=0;c<o.length;c++){var f=o[c];if(0===f.refs){for(var d=0;d<f.parts.length;d++)f.parts[d]();delete n[f.id]}}}}},function(e,t,i){"use strict";function o(e){var t=e.split("/");return{type:t[0],subtype:t[1]}}i.r(t),i(0);var n={video:!0,audio:!0,image:!0},r=function(){function e(e){this.config=e,this.container=e.dom,this.pfx=e.pfx,this.init()}return e.prototype.init=function(){var e=this;this.container.insertAdjacentHTML("beforeend",this.tpl()),this.element={},this.wrap=this.container.querySelector("."+this.pfx+"-wrap");var t=this.container.querySelector("."+this.pfx+"-top"),i=this.container.querySelector("."+this.pfx+"-input");i.addEventListener("change",(function(){var t=[];for(var r in i.files){var s=i.files[r];s instanceof File&&t.push(s)}if(t.length){e.clear(),t.sort((function(e,t){return e.name.localeCompare(t.name)}));var a=[],l=[];t.forEach((function(t){console.log(t);var i=o(t.type).type;n[i]?l.push(e.update(t).catch((function(e){console.log(e)}))):a.push(t)})),setTimeout((function(){}),100),Promise.all(l).then((function(){a.forEach((function(t){e.appendDom("other",e.otherTpl(t))}))})).catch((function(e){console.log(e)}))}})),t.addEventListener("click",(function(){i.click()})),this.wrap.addEventListener("click",(function(t){var i,o=t.target.dataset,n=o.name;"copy"===o.action&&n&&(clearTimeout(e.timer),e.removeTip(),(i=n,new Promise((function(e,t){if(navigator.clipboard)navigator.clipboard.writeText(i),e("");else{var o=document.createElement("textarea");document.body.appendChild(o),o.style.position="fixed",o.style.clip="rect(0 0 0 0)",o.style.top="10px",o.value=i,o.select();var n=void 0;try{n=document.execCommand("copy",!0)}catch(e){n=!1}document.body.removeChild(o),n?e(""):t()}}))).then((function(){e.wrap.setAttribute("data-text","已复制"),e.timer=window.setTimeout((function(){e.removeTip()}),1e3)})).catch((function(){e.wrap.setAttribute("data-text","复制失败"),e.timer=window.setTimeout((function(){e.removeTip()}),1e3)})))}))},e.prototype.removeTip=function(){this.wrap.setAttribute("data-text","")},e.prototype.update=function(e){var t=this;return new Promise((function(i,n){var r=o(e.type),s=r.type,a=r.subtype;if(/video/i.test(s))return t.appendDom("video",t.videoTpl(e)),void i(e);if(/audio/i.test(s))return t.appendDom("audio",t.audioTpl(e)),void i(e);var l=new FileReader;/image/i.test(s)?/svg/i.test(a)?l.readAsText(e):l.readAsDataURL(e):l.readAsText(e),l.onload=function(){/image/i.test(s)?/svg/i.test(a)?t.appendDom("svg",t.svgTpl(l.result,e)):t.appendDom("img",t.imgTpl(l.result,e)):/image/i.test(s),i(e)},l.onerror=function(e){n(e)}}))},e.prototype.appendDom=function(e,t){this.element[e]||(this.wrap.insertAdjacentHTML("beforeend",'<div class="'+this.pfx+"-list "+this.pfx+"-list-"+e+'"></div>'),this.element[e]=this.wrap.querySelector("."+this.pfx+"-list-"+e)),this.element[e].insertAdjacentHTML("beforeend",t)},e.prototype.clear=function(){if(this.element)for(var e in this.element)Object.prototype.hasOwnProperty.call(this.element,e)&&(this.element[e].innerHTML="")},e.prototype.videoTpl=function(e){var t=URL.createObjectURL(e);return'<div class="'+this.pfx+'-video">\n            <div class="'+this.pfx+'-video-top"><video controls src="'+t+'"/></div>\n            '+this.commonTpl(e)+"\n        </div>"},e.prototype.audioTpl=function(e){var t=URL.createObjectURL(e);return'<div class="'+this.pfx+'-audio">\n            <div class="'+this.pfx+'-audio-top"><audio controls src="'+t+'"/></div>\n            '+this.commonTpl(e)+"\n        </div>"},e.prototype.imgTpl=function(e,t){return'<div class="'+this.pfx+'-img">\n            <div class="'+this.pfx+'-img-top"><img src="'+e+'"></div>\n            '+this.commonTpl(t)+"\n        </div>"},e.prototype.svgTpl=function(e,t){return'<div class="'+this.pfx+'-svg">\n            <div class="'+this.pfx+'-svg-top">'+e+"</div>\n            "+this.commonTpl(t)+"\n        </div>"},e.prototype.otherTpl=function(e){return'<div class="'+this.pfx+'-other">\n        <div class="'+this.pfx+'-other-top"></div>\n        '+this.commonTpl(e)+"\n        </div>"},e.prototype.commonTpl=function(e){var t,i,o=e.name.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2f;").replace(/\n/g,"<br>");return'<div class="'+this.pfx+'-file-name" data-name="'+o+'" data-action="copy">\n        <p class="'+this.pfx+'-file-name-p" >名称： '+o+'</p>\n    </div>\n    <p class="'+this.pfx+'-file-size">大小： '+(t=e.size,void 0===i&&(i=1024),Math.round(10*t/i)/10)+'Kb</p>\n    <p class="'+this.pfx+'-file-date">日期： '+function(e,t){var i;void 0===t&&(t="yyyy/MM/dd"),t=t||"yyyy-MM-dd mm:ss";var o={"M+":(i="number"==typeof e?new Date(e):e).getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),"S+":i.getMilliseconds()};for(var n in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,i.getFullYear().toString().substr(4-RegExp.$1.length))),o)if(new RegExp("("+n+")").test(t)){var r=1===RegExp.$1.length?o[n]:("00"+o[n]).substr(o[n].toString().length);t=t.replace(RegExp.$1,r)}return t}(e.lastModified)+"</p>"},e.prototype.tpl=function(){return'<div class="'+this.pfx+'-wrap">\n            <input class="'+this.pfx+'-input" name="dir" type="file" webkitdirectory="" directory="" multiple="">\n            <div class="'+this.pfx+'-top">点击打开文件夹</div>\n        </div>'},e.prototype.destroy=function(){clearTimeout(this.timer),this.removeTip()},e}(),s=function(){return(s=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a={pfx:"kwe-files"},l=function(){function e(e){this.config=s(s({},a),e),this.file=new r(this.config)}return e.prototype.destroy=function(){this.file.destroy()},e}();t.default=l}]).default},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Files",[],t):"object"==typeof exports?exports.Files=t():e.Files=t();